Kapitel 4

Das Monero-Netzwerk

In diesem Kapitel lernen Sie die Schlüsselkonzepte hinter der Blockchain-Technologie kennen und erfahren, wie die Monero-Miner das Hauptbuch sicher halten. Wir beginnen mit der Erklärung der Struktur von Blöcken, der Art und Weise, wie sie zu einer fälschungssicheren Kette verknüpft sind, und wie die Miner den Arbeitsnachweis verwenden, um einen Konsens über eine vereinbarte Version des Hauptbuchs zu erreichen. Zum Thema Miner werden wir die Quelle neuer Moneroj besprechen, und wie die Coins in das Ökosystem freigegeben werden. Gegen Ende des Kapitels tauchen wir in ein paar kryptographische Konzepte ein (Hashes und Nonces), um den eigentlichen Prozess des Minings wirklich zu verstehen.
4.1 Die vereinfachte Anatomie eines Blocks

Im vorherigen Kapitel wurde besprochen, wie Transaktionen aufgebaut sind. Zusammenfassend lässt sich sagen, dass Ihre Wallet eine Nachricht mit der Anweisung verfasst, eine Ihrer Ausgaben an einen neuen Empfänger zu übertragen. Sensible Informationen in der Nachricht (Absender, Empfänger, Betrag) werden kryptografisch verschleiert, bevor Ihre Wallet die Nachricht autorisiert, indem sie sie mit Ihrem privaten Schlüssel digital signiert.

In diesem Kapitel erfahren Sie, wie die Transaktionsnachricht verarbeitet wird, um die eigentliche Überweisung zu veranlassen. Wenn Ihre Wallet diese Nachricht sendet, speichert das Netzwerk die Anfrage vorübergehend in einer Liste ausstehender Transaktionen, dem sogenannten Speicherpool. Die Monero-Miner sammeln diese unbestätigten Transaktionen aus dem Speicherpool und fassen sie zu Blöcken zusammen. Ein vereinfachter Block ist unten dargestellt:

![image](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/mm-c04i01%20block.png)
Abbildung 4.1 - Jeder fortlaufend nummerierte Block von Transaktionen muss sowohl eine Nonce als auch einen Verweis auf den Hash des vorherigen Blocks enthalten.

Jeder Block enthält eine Reihe von Transaktionen, eine kryptografische Verbindung zum vorherigen Block (Hash genannt) und einen Platz für den Miner, um eine spezielle Zahl einzufügen, die den Block vervollständigt (Nonce genannt).

Wenn Sie lernen wollen, wie Hashes und Nonces funktionieren, gibt es eine freundliche Einführung mit Beispielen gegen Ende dieses Kapitels (Sie können den letzten Abschnitt von Kapitel 4 überspringen und ihn jetzt lesen, wenn Sie neugierig auf die Kryptographie sind). Es gibt nur zwei Konzepte, die Sie kennen müssen, um zu verstehen, wie diese Techniken funktionieren, um die Blockchain zu sichern:

  1.Der Hash ist ein Sicherheitsmerkmal, das beweist, dass jeder Block direkt mit einer unveränderten Version des vorherigen Blocks verknüpft ist. Wenn ein     
  Angreifer versucht, irgendeinen Punkt im Ledger zu manipulieren, wird selbst der kleinste Änderungsversuch eklatant offensichtlich sein, da die Hashes bei jedem 
  nachfolgenden Block eine rote Flagge auslösen werden.

  2. Die Nonce ist eine spezielle Zeichenfolge, die den Block vervollständigt und ihn als für die Blockchain vorbereitet markiert. Es ist extrem rechenintensiv, 
  eine Nonce zu finden, die die Anforderungen erfüllt, die notwendig sind, um einen Block abzuschließen und zu versiegeln. Miner verbringen den größten Teil ihrer   Zeit und Energie mit der Suche nach gültigen Nonces. Es ist unmöglich, die Berechnung der Nonces im Voraus zu planen, daher muss die Suche bei jedem neuen         Block von vorne beginnen. Nonces sind nicht mathematisch aussagekräftig, sondern nur einmalige Zeichenketten aus zufälligen Zeichen.
 
4.2 Knoten sind das Netzwerk-Backbone
4.2.1 Knoten leiten Netzwerkdaten an Peers weiter

Bis jetzt haben Verweise auf "das Monero-Netzwerk" meist die Details seiner Zusammensetzung beschönigt. Wie werden Ihre Transaktionen tatsächlich über dieses nebulöse "Netzwerk" an Miner und andere Nutzer weitergegeben? Tausende von Monero-Knoten, die über den ganzen Planeten verstreut sind, sind miteinander verbunden und teilen schnell Nachrichten über Transaktionen und Blöcke.

Diese Nodes bilden ein Peer-to-Peer-Netzwerk, das eine effiziente und belastbare Kommunikation für Monero-Nutzer ermöglicht. Der Betrieb eines Knotens erfordert keine spezielle Ausrüstung oder Fachkenntnisse - wenn Sie die Monero-Software jetzt herunterladen und installieren, können Sie Ihren eigenen Knoten betreiben, bevor Sie dieses Kapitel zu Ende lesen!

![image](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/mm-c04i04%20nodes.png)
Abbildung 4.2 - Monero verwendet ein verteiltes Peer-to-Peer-Netzwerk, das aus einem Netz von freiwilligen Geräten besteht, die untereinander neue Daten austauschen. Die Knoten behalten eine vollständige Kopie der Blockchain und bilden das Rückgrat des Netzwerks. Da der Betrieb eines Knotens erheblichen Speicherplatz erfordert, verbinden sich einige Geräte (insbesondere mobile Wallets) stattdessen mit einem entfernten Knoten, um Informationen anzufordern und Transaktionen zu übertragen.

Es gibt keine "besonderen" oder "Super"-Knoten in Moneros Peer-to-Peer-Netzwerk; alle Knoten (einschließlich Ihres) sind gleichberechtigte Teilnehmer, die daran arbeiten, Ressourcen und die Arbeitslast zu teilen. Nodes werden auf Computern aller Formen und Größen gehostet - Laptops, Desktops, Server und sogar virtuelle Maschinen.

4.2.2 Nodes speichern die Blockchain

Wenn ein neuer Knoten initialisiert wird, muss er zunächst die gesamte Blockchain herunterladen und die kryptografischen Verbindungen, wie die Hashes und Nonces, verifizieren. Diese anfängliche Synchronisierung kann einige Stunden dauern, da der Knoten seine lokale Kopie der Blockchain aufbaut, während er die Gültigkeit jeder Transaktion und jedes Blocks bestätigt. Anstatt die Blockchain über eine einzige Verbindung zu einer zentralen Quelle herunterzuladen, empfängt jeder Knoten Übertragungen von vielen Peer-Knoten. Die Knoten müssen ihre Peers nicht identifizieren oder ihnen vertrauen, da die Gültigkeit der Daten kryptografisch bestätigt wird.

Jede Monero-Wallet-Software (z. B. die Monero-GUI, eine Telefon-App usw.) muss Zugriff auf eine Kopie der Blockchain haben, um wichtige Aufgaben wie das Abrufen der Transaktionshistorie, das Berechnen von Kontoständen und das Herstellen von Transaktionen ausführen zu können. Eine Wallet kann keine Transaktionen erstellen, bevor sie nicht mit einem synchronisierten Knoten kommuniziert hat, da die Software die relevanten nicht ausgegebenen Ausgaben finden und abrechnen muss. Allerdings kann Ihre Adresse Moneroj empfangen, egal ob Sie mit einem synchronisierten Knoten verbunden sind oder nicht (es wird einfach nicht in Ihrem Kontostand angezeigt, bis die Wallet diesen Block herunterlädt und verifiziert).
4.2.3 "Lokale Knoten" versus "Remote-Knoten"

Der Prozess des lokalen Speicherns/Verifizierens der gesamten Blockchain, so dass Ihre Wallet mit Ihrer eigenen Kopie des Ledgers interagieren kann, wird als das Betreiben eines lokalen Knotens bezeichnet. Wenn Sie diese Art von Setup verwenden, interagiert Ihre Wallet nur mit Ihrer persönlichen Kopie der Blockchain. Das Ausführen eines lokalen Knotens erfordert eine beträchtliche Menge an Festplattenspeicher (~70 GB zum Zeitpunkt des Schreibens), was nicht für alle Geräte, wie z. B. Handys, geeignet ist.

Zum Glück kann die Wallet-Software so konfiguriert werden, dass sie einen entfernten Knoten anstelle Ihres eigenen lokalen Knotens verwendet. Das bedeutet, dass sich Ihre Wallet mit einem anderen Knoten verbindet und einfach Informationen über Ihre Ausgaben abfragt. Die meisten mobilen Monero-Wallets verwenden standardmäßig einen Remote-Node, um die App schlank zu halten. Die Monero GUI- und CLI-Wallets können so konfiguriert werden, dass sie entweder einen lokalen Knoten oder einen Remote-Knoten verwenden.

Es gibt keine Sicherheitsrisiken bei der Verwendung eines entfernten Knotens; Ihr Seed und Ihre Schlüssel werden niemals offengelegt, so dass der Betreiber des entfernten Knotens nicht in der Lage ist, Ihre Gelder zu kontrollieren oder Informationen zu entschlüsseln, die durch Monero-Funktionen wie RingCT (Verbergen des Transaktionsbetrags) oder Stealth-Adressen (Verschleiern der Empfängeradresse) geschützt sind.

Es gibt einige kleine Zugeständnisse an die Privatsphäre, die ins Spiel kommen, wenn Sie entfernte Nodes verwenden, da der Node-Betreiber die Zeiten und IP-Adressen kennt, von denen Ihr Gerät Transaktionen sendet oder sich für Updates verbindet. Wenn Sie sich über ein VPN oder TOR mit dem Knoten verbinden, werden diese Risiken teilweise gemildert. Wenn Sie Ihren eigenen lokalen Knoten verwenden, scannt Ihre Wallet Ihre persönliche Kopie der Blockchain nach Ihrer Transaktionshistorie, anstatt sich auf eine dritte Partei zu verlassen, um diese Informationen abzurufen.

4.3 Schürfer erstellen neue Blöcke
4.3.1 Miner fügen neue Blöcke zur längsten Kette hinzu

Die Miner sammeln ausstehende Transaktionen aus dem Speicherpool, verifizieren ihre Authentizität, indem sie prüfen, ob die kryptografischen Beweise und Signaturen gültig sind, und überprüfen, ob das Schlüssel-Image nicht schon einmal verwendet wurde (siehe "3.2.3 Ringsignaturen", um zu überprüfen, warum dies wichtig ist).

Um einen Block vorzubereiten, entwirft der Miner eine Liste von Transaktionen, die enthalten sein sollen, zusammen mit dem Hash des vorherigen Blocks, um eine kryptografische Verbindung herzustellen. Zuletzt sucht der Miner nach einer Nonce, die zur Vervollständigung des Blocks verwendet werden kann.

Zu jedem Zeitpunkt gibt es Tausende von Minern, die alle einzeln (oder in Teams, bekannt als Mining-Pools) daran arbeiten, eine Nonce zu finden, die den aktuellen Block von Transaktionen vervollständigt. Sobald ein Miner oder ein Pool eine Nonce gefunden hat, die seinen Block vervollständigt, gibt er seine Version dem Rest des Netzwerks bekannt. Nach Erhalt dieses abgeschlossenen Blocks fügen die anderen Miner und Knoten ihn an ihre Kopie der Blockchain an, wodurch die Höhe der Kette um einen Block erhöht wird. Transaktionen, auf die der neue Block verweist, werden aus dem Speicherpool entfernt, und die anderen Miner verwerfen ihre eigene (unvollständige) Arbeit an diesem Block, um mit der Vorbereitung des nächsten Blocks zu beginnen.
4.3.2 Eine schwierige Aufgabe sorgt für Stabilität und Fairness

Die globale Natur des Monero-Ökosystems und unvorhersehbare Übertragungsverzögerungen aufgrund von Netzwerklatenz führen gelegentlich zu kurzzeitigen Spaltungen in der Blockchain, wenn zwei Miner unabhängig voneinander zwei verschiedene Versionen eines Blocks in gleicher Höhe fertigstellen. Nehmen wir an, ein Miner in Südamerika ist der erste, der einen Block fertigstellt, aber ein anderer Miner in Europa beendet seine eigene Kopie, bevor er die Übertragung aus Südamerika erhält. In diesem Fall könnte die westliche Hemisphäre vorübergehend eine andere Blockchain verwenden als die östliche Hemisphäre. Für einen kurzen Moment gibt es zwei konkurrierende Monero-Ledger, die sich leicht unterscheiden können (je nachdem, welche ausstehenden Transaktionen jeder Miner aus dem Speicherpool ausgewählt hat). Man könnte denken, dass dies ein katastrophaler Vorfall wäre!



