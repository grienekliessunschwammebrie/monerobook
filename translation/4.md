Kapitel 4

Das Monero-Netzwerk

In diesem Kapitel lernen Sie die Schlüsselkonzepte hinter der Blockchain-Technologie kennen und erfahren, wie die Monero-Miner die Blockchain sicher halten. Wir beginnen mit der Erklärung der Struktur von Blöcken, der Art und Weise, wie sie zu einer fälschungssicheren Kette verknüpft sind, und wie die Miner den "Proof-of-work"(Arbeitsnachweis) verwenden, um einen Konsens über eine vereinbarte Version des Ledgers zu erreichen. Zum Thema Miner werden wir den Ursprung neuer Moneroj besprechen, und wie die Kryptomünzen in das Ökosystem freigegeben werden. Gegen Ende des Kapitels tauchen wir in ein paar kryptographische Konzepte ein (Hashes und Nonces), um den eigentlichen Prozess des Minings wirklich zu verstehen.

4.1 Der vereinfachte Aufbau eines Blocks

Im vorherigen Kapitel wurde besprochen, wie Transaktionen aufgebaut sind. Zusammenfassend lässt sich sagen, dass Ihr Wallet eine Nachricht mit der Anweisung verfasst, eine Ihrer Ausgaben an einen neuen Empfänger zu übertragen. Sensible Informationen in der Nachricht (Absender, Empfänger, Betrag) werden kryptografisch verschlüsselt, bevor Ihr Wallet die Nachricht autorisiert, indem sie sie mit Ihrem privaten Schlüssel digital signiert.

In diesem Kapitel erfahren Sie, wie die Transaktions-Nachricht verarbeitet wird, um die eigentliche Überweisung dann zu veranlassen. Wenn Ihr Wallet diese Nachricht sendet, speichert das Netzwerk die Anfrage vorübergehend in einer Liste ausstehender Transaktionen, dem sogenannten Speicherpool. Die Monero-Miner sammeln diese unbestätigten Transaktionen aus dem Speicherpool und fassen sie zu Blöcken zusammen. Ein vereinfachter Block ist hier unten dargestellt:

![image](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/mm-c04i01%20block.png)
Abbildung 4.1 - Jeder fortlaufend, nummerierte Block von Transaktionen muss sowohl eine Nonce als auch einen Verweis auf den Hash des vorherigen Blocks enthalten.

Jeder Block enthält eine Reihe von Transaktionen, eine kryptografische Verknüpung zum vorherigen Block (Hash genannt) und eine bestimmte Stelle für den Miner, um darin eine spezielle Zahl einzufügen, die den Block vervollständigt (Nonce genannt).

Wenn Sie lernen wollen, wie Hashes und Nonces funktionieren, gibt es eine tolle Einführung mit Beispielen gegen Ende dieses Kapitels (Sie können jetzt zum letzten Abschnitt von Kapitel 4 überspringen und diesen lesen, wenn Sie neugierig auf die Kryptographie sind). Es gibt nur zwei Konzepte, die Sie wissen müssen, um zu verstehen, wie diese Techniken funktionieren, um die Blockchain zu sichern:

1. Der Hash(wert) ist ein Sicherheitsmerkmal, das beweist, dass jeder Block direkt mit einer unveränderten Version des vorherigen Blocks verknüpft ist. Wenn ein
Angreifer versucht, irgendeinen Punkt in der Blockchain zu manipulieren, wird selbst der kleinste Änderungsversuch sofort bemerkbar machen, da die Hashes bei jedem nachfolgenden Block die "rote Flagge" zeigen würden.

2. Die Nonce ist eine spezielle Zeichenfolge, die den Block vervollständigt und ihn als für die Blockchain vorbereitet markiert. Es benötigt extrem viel           Rechenleistung, eine Nonce zu erstellen, die die Anforderungen erfüllt, die notwendig sind, um einen Block zu vervollständigen und zu versiegeln. Miner           verbringen den größten Teil ihrer Zeit und Energie mit der Suche nach gültigen Nonces. Es ist unmöglich, die Berechnung der Nonces im Voraus zu planen,           daher muss die Suche bei jedem neuen Block von vorne beginnen. Nonces sind nicht mathematisch bedeutsam, sondern nur einmalige Ketten aus zufälligen Zeichen.
 
4.2 Nodes sind das Rückrat des Netzwerkes
4.2.1 Nodes leiten Netzwerkdaten an Teilnehmer weiter

Bis jetzt haben Verweise auf "das Monero-Netzwerk" meist die Details seiner Zusammensetzung vertuscht. Wie werden Ihre Transaktionen nun tatsächlich über dieses mysteriöse  "Netzwerk" an Minern und anderen Nutzer weitergegeben? Tausende von Monero-Knoten, die über den ganze Welt verstreut arbeiten, sind miteinander verbunden und teilen sich untereinander schnell Informtionen über Transaktionen und Blöcke.

Diese Nodes bilden ein Peer-to-Peer-Netzwerk, das eine effiziente und robuste Kommunikation für Monero-Nutzer ermöglicht. Das Betrieben einer Node erfordert keine speziellen Gerätschaften oder Fachkenntnisse - wenn Sie die Monero-Software jetzt herunterladen und installieren, können Sie Ihren eigene Node betreiben, noch bevor Sie dieses Kapitel zu Ende lesen!

![image](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/mm-c04i04%20nodes.png)
Abbildung 4.2 - Monero verwendet ein dezentrales Peer-to-Peer-Netzwerk, welches aus einem Netz von freiwilligen Geräten besteht, die untereinander neue Daten austauschen. Die Knoten speichern eine vollständige Kopie der Blockchain ab und bilden das Rückgrat des Netzwerks. Da der Betrieb eines Knotens erheblichen Speicherplatz erfordert, verbinden sich einige Geräte (insbesondere mobile Wallets) stattdessen mit einem fremden Node, um Informationen anzufordern und Transaktionen zu übermitteln.

Es gibt keine "besonderen" oder "Super"-Nodes in Moneros Peer-to-Peer-Netzwerk; alle Knoten (einschließlich Ihres) sind gleichberechtigte Teilnehmer, die daran arbeiten, Ressourcen und die Arbeitslast zu teilen. Nodes werden auf Computern aller Arten und Größen gehostet - Laptops, Desktops, Server und sogar virtuelle Maschinen.

4.2.2 Nodes speichern die Blockchain

Wenn ein neuer Knoten initialisiert wird, muss er zunächst die gesamte Blockchain herunterladen und die kryptografischen Verbindungen, wie die Hashes und Nonces, verifizieren. Diese anfängliche Synchronisierung kann einige Stunden dauern, da der Knoten seine lokale Kopie der Blockchain aufbaut, während er die Gültigkeit jeder Transaktion und jedes Blocks bestätigt. Anstatt die Blockchain über eine einzige Verbindung zu einer zentralen Quelle herunterzuladen, empfängt jeder Knoten Übertragungen von vielen Peer-Knoten. Die Knoten müssen ihre Peers nicht identifizieren oder ihnen vertrauen, da die Gültigkeit der Daten kryptografisch bestätigt wird.

Jede Monero-Wallet-Software (z. B. die Monero-GUI, eine Telefon-App usw.) muss Zugriff auf eine Kopie der Blockchain haben, um wichtige Aufgaben wie das Abrufen der Transaktionshistorie, das Berechnen von Kontoständen und das Herstellen von Transaktionen ausführen zu können. Eine Wallet kann keine Transaktionen erstellen, bevor sie nicht mit einem synchronisierten Knoten kommuniziert hat, da die Software die relevanten nicht ausgegebenen Ausgaben finden und abrechnen muss. Allerdings kann Ihre Adresse Moneroj empfangen, egal ob Sie mit einem synchronisierten Knoten verbunden sind oder nicht (es wird einfach nicht in Ihrem Kontostand angezeigt, bis die Wallet diesen Block herunterlädt und verifiziert).
4.2.3 "Lokale Knoten" versus "Remote-Knoten"

Der Prozess des lokalen Speicherns/Verifizierens der gesamten Blockchain, so dass Ihre Wallet mit Ihrer eigenen Kopie des Ledgers interagieren kann, wird als das Betreiben eines lokalen Knotens bezeichnet. Wenn Sie diese Art von Setup verwenden, interagiert Ihre Wallet nur mit Ihrer persönlichen Kopie der Blockchain. Das Ausführen eines lokalen Knotens erfordert eine beträchtliche Menge an Festplattenspeicher (~70 GB zum Zeitpunkt des Schreibens), was nicht für alle Geräte, wie z. B. Handys, geeignet ist.

Zum Glück kann die Wallet-Software so konfiguriert werden, dass sie einen entfernten Knoten anstelle Ihres eigenen lokalen Knotens verwendet. Das bedeutet, dass sich Ihre Wallet mit einem anderen Knoten verbindet und einfach Informationen über Ihre Ausgaben abfragt. Die meisten mobilen Monero-Wallets verwenden standardmäßig einen Remote-Node, um die App schlank zu halten. Die Monero GUI- und CLI-Wallets können so konfiguriert werden, dass sie entweder einen lokalen Knoten oder einen Remote-Knoten verwenden.

Es gibt keine Sicherheitsrisiken bei der Verwendung eines entfernten Knotens; Ihr Seed und Ihre Schlüssel werden niemals offengelegt, so dass der Betreiber des entfernten Knotens nicht in der Lage ist, Ihre Gelder zu kontrollieren oder Informationen zu entschlüsseln, die durch Monero-Funktionen wie RingCT (Verbergen des Transaktionsbetrags) oder Stealth-Adressen (Verschleiern der Empfängeradresse) geschützt sind.

Es gibt einige kleine Zugeständnisse an die Privatsphäre, die ins Spiel kommen, wenn Sie entfernte Nodes verwenden, da der Node-Betreiber die Zeiten und IP-Adressen kennt, von denen Ihr Gerät Transaktionen sendet oder sich für Updates verbindet. Wenn Sie sich über ein VPN oder TOR mit dem Knoten verbinden, werden diese Risiken teilweise gemildert. Wenn Sie Ihren eigenen lokalen Knoten verwenden, scannt Ihre Wallet Ihre persönliche Kopie der Blockchain nach Ihrer Transaktionshistorie, anstatt sich auf eine dritte Partei zu verlassen, um diese Informationen abzurufen.

4.3 Schürfer erstellen neue Blöcke
4.3.1 Miner fügen neue Blöcke zur längsten Kette hinzu

Die Miner sammeln ausstehende Transaktionen aus dem Speicherpool, verifizieren ihre Authentizität, indem sie prüfen, ob die kryptografischen Beweise und Signaturen gültig sind, und überprüfen, ob das Schlüssel-Image nicht schon einmal verwendet wurde (siehe "3.2.3 Ringsignaturen", um zu überprüfen, warum dies wichtig ist).

Um einen Block vorzubereiten, entwirft der Miner eine Liste von Transaktionen, die enthalten sein sollen, zusammen mit dem Hash des vorherigen Blocks, um eine kryptografische Verbindung herzustellen. Zuletzt sucht der Miner nach einer Nonce, die zur Vervollständigung des Blocks verwendet werden kann.

Zu jedem Zeitpunkt gibt es Tausende von Minern, die alle einzeln (oder in Teams, bekannt als Mining-Pools) daran arbeiten, eine Nonce zu finden, die den aktuellen Block von Transaktionen vervollständigt. Sobald ein Miner oder ein Pool eine Nonce gefunden hat, die seinen Block vervollständigt, gibt er seine Version dem Rest des Netzwerks bekannt. Nach Erhalt dieses abgeschlossenen Blocks fügen die anderen Miner und Knoten ihn an ihre Kopie der Blockchain an, wodurch die Höhe der Kette um einen Block erhöht wird. Transaktionen, auf die der neue Block verweist, werden aus dem Speicherpool entfernt, und die anderen Miner verwerfen ihre eigene (unvollständige) Arbeit an diesem Block, um mit der Vorbereitung des nächsten Blocks zu beginnen.
4.3.2 Eine schwierige Aufgabe sorgt für Stabilität und Fairness

Die globale Natur des Monero-Ökosystems und unvorhersehbare Übertragungsverzögerungen aufgrund von Netzwerklatenz führen gelegentlich zu kurzzeitigen Spaltungen in der Blockchain, wenn zwei Miner unabhängig voneinander zwei verschiedene Versionen eines Blocks in gleicher Höhe fertigstellen. Nehmen wir an, ein Miner in Südamerika ist der erste, der einen Block fertigstellt, aber ein anderer Miner in Europa beendet seine eigene Kopie, bevor er die Übertragung aus Südamerika erhält. In diesem Fall könnte die westliche Hemisphäre vorübergehend eine andere Blockchain verwenden als die östliche Hemisphäre. Für einen kurzen Moment gibt es zwei konkurrierende Monero-Ledger, die sich leicht unterscheiden können (je nachdem, welche ausstehenden Transaktionen jeder Miner aus dem Speicherpool ausgewählt hat). Man könnte denken, dass dies ein katastrophaler Vorfall wäre!

![image](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/mm-c04i02%20longest%20chain.png)
Abbildung 4.3 - Miner konkurrieren darum, die Kette um einen neuen Block zu erweitern. (Oben) Die Blockchain ist auf Höhe "3", also arbeitet jeder Miner an seiner Version von Block "4". (Unten) Block "4" wurde vom mittleren Schürfer zuerst fertiggestellt, also wird seine Version zur gemeinsamen Blockchain hinzugefügt, und alle Schürfer wechseln zur Suche nach einer Nonce für Block "5".

Im Gegenteil, diese Situation lässt sich leicht lösen, indem man elegant eine einfache Regel einführt: Alle Miner einigen sich darauf, am Mining des nächsten Blocks in der längsten Kette zu arbeiten. Dies ist ein Schlüsselelement des dezentralen Konsensprotokolls von Monero und ermöglicht es dem Monero-Netzwerk, sich nach einer versehentlichen Trennung schnell wieder zu einer einzigen Kette zu vereinen. Anstatt zu versuchen, die diskrepanten Blöcke sofort aufzulösen, arbeiten die Miner einfach weiter an der Fertigstellung des nächsten Blocks für ihre Version.

Innerhalb der nächsten Minuten wird einer der Miner einen nachfolgenden Block lösen und ihn zu seiner Kette hinzufügen. Sobald dies geschieht, wird ihre Version zur längsten Kette, sodass die anderen Miner und Knoten diese Kopie schnell übernehmen und den alternativen verwaisten Block verwerfen. Alle Transaktionen, die nur den verwaisten Block enthielten, verbleiben im Speicherpool für die Hauptkette und werden in einem nachfolgenden Block gemint. Indem man einfach der längsten Kette folgt, die mit dem größten Aufwand erstellt wurde, löst das Netzwerk alle Spaltungen vollständig auf und kehrt zum Konsens auf einem einzigen universellen Ledger zurück.
4.3.3 Monero-"Taxis" verwenden ein hartes Rätsel, um Fairness zu gewährleisten

Die Validierung einer Reihe von Transaktionen und deren Auflistung in einem Block ist rechnerisch nicht schwierig. Die zeitaufwändige Aufgabe für den Miner ist es, eine Nonce zu finden, die es ihm erlaubt, den Block zu vervollständigen. Es gibt keine Möglichkeit, den Prozess abzukürzen oder die Suche nach einer gültigen Nonce mathematisch einzugrenzen. Miner wählen einfach zufällige Zahlen aus und testen, ob sie den Block vervollständigen, durch Versuch und Irrtum.

Das Vorhandensein dieses willkürlichen Hindernisses mag auf den ersten Blick seltsam erscheinen! Die Miner erfüllen eine wichtige und rechnerisch einfache Aufgabe für das Netzwerk (die Validierung von Transaktionen), müssen aber eine nutzlose schwierige Aufgabe (das Finden der Nonce) durchführen, um ihre Ergebnisse zu übermitteln.

Um die Argumentation dahinter zu verstehen, betrachten Sie das hypothetische Monero-Taxi-Netzwerk mit nur wenigen Fahrzeugen und vielen Taxifahrern, die vorübergehend eines der Taxis nutzen können, wenn sie eine genehmigte Route einreichen. Den ganzen Tag über rufen potentielle Fahrer an und fordern Fahrten in der ganzen Stadt an. Alle Anfragen von Fahrern, die noch nicht abgeholt wurden, werden in einem Echtzeit-"Pool" ausstehender Fahrten gesammelt.

![image](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/mm-c04i05%20rides.png)
Abbildung 4.4 - In der ersten Phase der Erstellung eines Fahrplans sieht sich jeder Fahrer den Pool der anstehenden Fahrten an und entwirft eine Route.

Anstatt dass eine zentrale Taxizentrale jede ankommende Fahrt einem Auto oder Fahrer zuweist, schaut sich jeder Taxifahrer den Pool an und stellt seine eigene Liste mit 5 - 10 Fahrten zusammen, die er in den nächsten 30 Minuten erledigen könnte. Dieser Teil der Routen-/Fahrtenplanung ist für erfahrene Taxifahrer einfach und schnell! Sobald ein Fahrer eine Liste von Fahrten zusammengestellt hat, die er in seinen nächsten "Block" von Fahrten aufnehmen kann, führt er eine letzte Aufgabe aus, die unten beschrieben wird, und übermittelt dann seine Route an das Monero Taxicab Network.

Wenn der Fahrer eine gültige Route mit echten anstehenden Fahrern vorgeschlagen hat, dann wird der Plan genehmigt! Die Fahrer, die im Plan des Taxifahrers enthalten sind, werden aus dem Pending-Pool entfernt, der Taxifahrer checkt ein Fahrzeug aus, und die Reisenden werden bald zu ihren Zielen gebracht. Der Fahrer sammelt das Fahrgeld von jedem Fahrer ein und erhält einen Bargeldbonus vom Monero Taxicab Network, weil er der erste war, der einen vollständigen Plan eingereicht hat. So weit, so gut, das sollte ziemlich intuitiv sein! Unvollständige Fahrten werden in einem Pool aufgelistet; wenn ein Taxifahrer erfolgreich einen genehmigten Block von Fahrten einreicht, werden die Fahrer zu ihren Zielen transportiert und aus dem schwebenden Pool entfernt.

![image](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/mm-c04i06%20scrabble.png)
Abbildung 4.5 - Nachdem die Fahrer die (relativ) einfache Aufgabe der Routenplanung erledigt haben, müssen sie ein schwieriges Rätsel lösen - in dieser Analogie einen Weg finden, die Buchstaben aus den Adressen neu anzuordnen, um einen Satz zu bilden.

Das Monero-Taxi-Netzwerk hat jedoch eine sehr merkwürdige Regel: Damit ein Fahrer seinen Plan für einen Block von Fahrten beim Monero-Netzwerk einreichen kann, muss er zuerst eine schwierige, nutzlose Aufgabe erledigen. Stellen Sie sich vor, der Fahrer muss alle Buchstaben in den Zieladressen der Fahrer verschlüsseln und einige davon verwenden, um fünf Sätze (> 50 Wörter insgesamt) zu generieren, die alles Mögliche sagen können, aber eine korrekte Grammatik/Rechtschreibung in der Landessprache haben müssen. Ein Fahrer, der eine geplante Route einreicht, muss sowohl die Liste der Fahrten als auch die unsinnigen ("nonce") Sätze enthalten, die mit den Buchstaben in den Zieladressen übereinstimmen, andernfalls wird seine Route automatisch abgelehnt. Es gibt mehrere gültige Nonce-Sätze, die aus den meisten Buchstabensätzen konstruiert werden können (z.B. {a,e,e,g,i,m,n,r,r,s,t,o,o} kann sowohl zu "Felgen ärgern auch!" als auch zu "Monero ist toll!" umarrangiert werden), und die resultierenden Sätze sind absolut nutzlos für irgendetwas anderes als das Einreichen dieses Satzes von Fahrten an das Monero Taxicab Network.

Eine Eigenschaft dieser Art von Aufgabe, die Parallelen in der Kryptowährung Monero haben wird, ist, dass es sehr schwer ist, eine Nonce zu finden, und sehr einfach, eine zu verifizieren. Für dieses Taxi-Szenario ist es ziemlich schwierig, ein Dutzend Adressen von Hand in 50 Wörter umzuordnen, die gültige Sätze bilden. Es ist jedoch trivial für eine andere Person, das Nonce-Ergebnis zu überprüfen und zu verifizieren, dass es den Block der Fahrten vervollständigt. Wenn ein Fahrer seine Nonce in dem unten gezeigten Format einreicht, können Sie sehr schnell bestätigen, dass "Apple jam is very bad" ein gültiger Satz ist und dass die Buchstaben richtig aus den Fahrtzielen konstruiert sind. Diese Überprüfung erfolgt fast augenblicklich, verglichen mit der Zeit, die der Fahrer brauchte, um die Buchstaben neu anzuordnen und mehrere Sätze zu finden.

![image](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/mm-c04i07%20nonce.png)
Abbildung 4.6 - Einen Nonce-Satz durch Umordnen der Adressen zu finden, ist knifflig und zeitaufwändig. Die Gültigkeit einer Übermittlung lässt sich jedoch leicht überprüfen, indem man schnell kontrolliert, dass sie nur Buchstaben aus den in der Route enthaltenen Fahrten verwendet.

Ein erfahrener Taxifahrer wäre in der Lage, die Fahrtroute aus der Fahrtenliste in weniger als 60 Sekunden zu planen, aber es wird ihn wahrscheinlich einige Minuten kosten, die Buchstaben neu anzuordnen und Nonce-Sätze von Hand zu finden. Tatsächlich wird der größte Teil seines Aufwands bei der Vorbereitung des vorgeschlagenen Fahrtenblocks darauf verwendet werden, diesen nutzlosen Nonce zu finden.

Stellen Sie sich diesen Prozess aus der Sicht eines Taxifahrers vor, der direkt nach der Genehmigung des letzten Blocks beginnt. Sie erstellen schnell eine Route, die mehrere Fahrten aus der Liste der anstehenden Fahrten enthält. Dann fangen Sie an, die Buchstaben der Fahrtziele in eine Art Nonce-Satz umzuordnen. Ein paar Minuten lang arbeiten Sie und alle anderen Taxifahrer an der gleichen Liste ausstehender Fahrten, wobei jeder versucht, einen ausreichend langen Nonce-Satz mit mehr als 50 Wörtern zu erstellen. Plötzlich sendet ein anderer Fahrer eine Liste der Fahrten zusammen mit einem fertigen Nonce ein. Alle Fahrten, an denen Sie gearbeitet haben, verschwinden aus dem Pool! Sie müssen Ihre Arbeit an diesem Block verwerfen (da die Fahrer bereits unterwegs sind) und zu einem neuen Satz anstehender Fahrten wechseln. Der Prozess, eine gültige Nonce für diesen Satz von Fahrern zu finden, beginnt wieder von vorne, basierend auf dem neuen Satz von Buchstaben in ihren Zielen.

Warum sollte das Monero Taxicab Network seinen Fahrern eine so schwierige und nutzlose Aufgabe auferlegen? Es ist tatsächlich ihr todsicherer Weg, um sicherzustellen, dass die Kunden fair bedient werden! Stellen Sie sich vor, ein paar der Taxifahrer verhalten sich in irgendeiner Weise unethisch, vielleicht ignorieren sie anstehende Fahrten, die aus einem bestimmten Stadtteil angerufen werden, oder sie wählen nur die Fahrer aus, die zu Unternehmen fahren, die diese unfairen Fahrer bestochen haben. Ohne die Nonce-Anforderung könnten diese kleinen Gruppen oder einzelne böswillige Fahrer den Fahrtenauswahlprozess für das gesamte Unternehmen dominieren, indem sie ständig ihre (unfairen oder ausschließenden) Routen einreichen, sobald ein Auto verfügbar wird. Auf diese Weise könnten sie einige Kundengruppen systematisch schlecht behandeln, was den Kernprinzipien des Monero-Taxi-Netzwerks, das sich der fairen Bedienung aller Fahrer verschrieben hat, absolut zuwiderläuft.

Der aufgabenunabhängige Wettbewerb zwischen vielen Taxifahrern ist entscheidend für das Ziel von Monero, eine faire Bereitstellung von Fahrzeugen und Fahrten zu gewährleisten. Unter der Annahme, dass alle Taxifahrer in etwa gleich schnell Buchstaben neu anordnen können, wird es eher zufällig sein, welcher Fahrer eine Lösung findet und seinen Block von Plänen zuerst einreichen kann. Es ist unwahrscheinlich, dass ein Fahrer der erste sein könnte, der mehrere Blockpläne hintereinander einreicht (d.h. der erste ist, der Nonce-Sätze für mehrere aufeinanderfolgende Blöcke findet), da jeder Fahrer gegen alle anderen Fahrer konkurriert und ihnen zahlenmäßig unterlegen ist.

Die meisten der vielen potenziellen Fahrer werden ehrliche Individuen sein, die faire Blockpläne einreichen, damit die Stadt reibungslos funktioniert. Wenn es ein paar böswillige Fahrer gibt, die unfaire Pläne einreichen wollen, verhindert die Nonce-Aufgabe, dass sie das gesamte System kontrollieren können. Statistisch gesehen werden sie gelegentlich der erste sein, der die Nonce findet, und somit in der Lage sein, ihren ausschließenden Routenplan für diesen Block einzureichen. Der Rest der Fahrer, von denen die meisten ehrlich sind, werden jedoch sofort anfangen, an ihren fairen Blöcken zu arbeiten, um sie für die nächste Reihe von Fahrten vorzuschlagen! Aufgrund der Zufälligkeit, wer zuerst einen Nonce findet, wird der nächste Satz von Fahrten wahrscheinlich von einem ehrlichen Fahrer durchgeführt, dessen Plan die zuvor ausgeschlossenen Fahrten enthält. Dieses System der Auferlegung von nutzloser Arbeit, um zufällig zu bestimmen, welche Fahrten der Fahrer akzeptiert werden, ermöglicht es dem Monero Taxicab Netzwerk, sicher zu sein, dass eine Minderheit von böswilligen Fahrern einen Benutzer oder eine Gruppe nicht von der Buchung von Fahrten blockieren kann.

Das Monero Taxicab Network hat somit keine zentrale Instanz, die für die Kontrolle der Fahrtenaktivität und -zuweisung verantwortlich oder haftbar ist. Stattdessen wird diese Aufgabe auf die einzelnen Fahrer verteilt, wobei der nutzlose Nonce-Wettbewerb genutzt wird, um zufällig auszuwählen, welcher Routenvorschlag angenommen wird. Dies stellt statistisch sicher, dass die Autos häufig ehrlichen Fahrern zugewiesen werden, so dass das Monero Taxicab Network einen ausgezeichneten Ruf hat, allen Kunden einen fairen Service zu bieten.

Inzwischen fragen Sie sich wahrscheinlich, wie diese erweiterte Taxi-Metapher mit der Kryptowährung zusammenhängt, um die es in diesem Buch vordergründig geht! Sie haben vielleicht herausgefunden, dass das dezentralisierte Monero-Taxi-Netzwerk eine offene Analogie für das Monero-Kryptowährungsnetzwerk ist, das einen fairen globalen Service ohne eine zentrale Autorität bieten muss.

Jede Fahrt entspricht einer Monero-Transaktion, die im Speicherpool wartet, bis sie für einen Platz in einem Auto/Block ausgewählt wird. Die Taxifahrer repräsentieren Miner. Beide führen eine einfache wichtige Aufgabe aus (Taxifahrer planen Routen; Miner sammeln und validieren Transaktionen), sind aber gezwungen, gegen andere Fahrer/Miner in einer nutzlosen schwierigen Nonce-Aufgabe zu konkurrieren. Diese Barriere sorgt dafür, dass zufällig bestimmt wird, wer zuerst Erfolg hat - so werden statistisch gesehen die meisten Autos/Blöcke an ehrliche Fahrer/Miner verteilt. Derjenige Taxifahrer, der seine Route zuerst einreicht, wird mit einem Bonus von der Monero-Taxi-Gesellschaft und einem Fahrgeld von jedem der Fahrer, die einen Platz erhalten haben, belohnt. Ebenso werden die Miner mit einer Provision (genannt Coinbase oder Block-Belohnung) für das Abschließen jedes Blocks belohnt, und sie sammeln auch Gebühren von den Transaktionen, die im Block enthalten sind.

4.3.4 Miner werden für ihre Leistung bezahlt

Jedes Mal, wenn ein Miner erfolgreich einen Block schürft (d. h. als erster eine Nonce findet, die den nächsten Block auf der längsten Kette vervollständigt), wird er auf zwei verschiedene Arten bezahlt.

    Erstens erhält der Miner eine Belohnung für das Bereitstellen eines abgeschlossenen Blocks mit validierten Transaktionen. Diese Block-Belohnung ist analog zu dem Bargeld-Bonus, den das Taxi-Netzwerk Fahrern zahlt, die abgeschlossene Routen einreichen. Alle Miner, die den gelösten Block erhalten und bestätigen, fügen diese frisch geprägte Coinbase der Adresse des Miners hinzu, der die gültige Nonce zuerst gefunden hat.

    Zweitens sammelt der Miner Gebühren ein, die in den Transaktionen enthalten waren. Monero-Nutzer können die Wahrscheinlichkeit erhöhen, dass ein Miner ihre Transaktion früher einschließt, indem sie eine größere Gebühr einschließen.

Es ist ein weit verbreiteter Irrglaube, dass Miner Coins "finden" oder "erschaffen". Tatsächlich validieren die Miner lediglich Transaktionen und werden für ihre Arbeit mit neuen Coins bezahlt. Diese Einführung von neuen Moneroj wird als Coin-Emission bezeichnet.

Als Monero gestartet wurde, lag die Münzemissionsrate bei mehr als 30 XMR alle 2 Minuten. Diese Belohnung wird sanft abnehmen, bis sie im Jahr 2022 0,6 XMR pro 2-Minuten-Block erreicht. Moneros kontinuierliche Abnahme soll ein stabileres wirtschaftliches Umfeld für Miner bieten, verglichen mit den dramatischen Halbierungsereignissen anderer Kryptowährungen, bei denen die Blockbelohnung abrupt erheblich reduziert wird. Nach 2022 wird Moneros Tail-Emission konstant bleiben, was garantiert, dass das Mining eines Blocks immer 0,6 XMR belohnen wird.

Viele Kryptowährungen haben eine feste Obergrenze für die Coin-Emission, mit einem harten Limit für das maximale Angebot. Sobald die Angebotsobergrenze erreicht ist, werden keine neuen Münzen für Miner eingeführt, die dann gezwungen sind, ausschließlich von Gebühren zu leben. Bei Bitcoin beispielsweise wird dieser Paradigmenwechsel bei den finanziellen Anreizen um das Jahr 2140 eintreten, wenn das Angebot 21 Millionen Bitcoins erreicht hat und nicht mehr weiter ansteigen kann. Dieser Ansatz wird oft als Vorteil angepriesen, um "deflationär" zu bleiben, jedoch basieren diese Argumente oft auf der Vermengung des Konzepts einer sich aufblähenden Geldmenge mit einer anderen Verwendung des Wortes "Inflation", um eine unerwünschte Abnahme der Kaufkraft einer Währung zu beschreiben.

Die jährliche Angebotssteigerung durch Moneros 0,6 XMR Tail Emission beträgt weniger als 1% pro Jahr. Während die Entwickler die Tail Emission geschaffen haben, um Miner langfristig zu incentivieren, ist ein nettes Nebenprodukt der einfache Vergleich zu Asset Backed Finanzsystemen. Die Tail Emission Rate der Angebotssteigerung ist vergleichbar mit dem jährlichen Anstieg des Goldangebots weltweit, das in der modernen Zivilisation historisch gesehen die reinste und stabilste Form von Geld ist. Da die Bergleute immer in der Lage sein werden, Gebühren zu sammeln, bieten die garantierten Coinbase-Zahlungen eine größere finanzielle Stabilität für die Bergleute auf lange Sicht. Dieser Sozialvertrag stellt sicher, dass die Miner weiterhin einen Anreiz haben, ihre Geräte zur Sicherung des Monero-Netzwerks einzusetzen.

![image](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/mm-4.3.3%20rewards.png)
Abbildung 4.7 - Ein Miner erhält jedes Mal, wenn er einen Block minet, zwei Arten von Zahlungen: 1) die Gebühren, die in jeder Transaktion enthalten sind, und 2) eine Blockbelohnung, die aus frisch gemintem Moneroj besteht.

4.4 Proof-of-Work-Systeme

Nun werden wir uns von der Taxi-Analogie lösen und direkt die Systeme diskutieren, die Fairness in Monero sicherstellen sollen. Dieser Prozess der Kopplung wichtiger Netzwerkfunktionen mit der Suche nach einem nutzlosen Nonce wird als Proof-of-Work-System bezeichnet. Viele Kryptowährungen basieren auf PoW-basiertem Konsens, und es gibt Unterschiede zwischen verschiedenen Implementierungen mit unterschiedlichen Eigenschaften. Sie haben jedoch gemeinsam, dass sie Dezentralität erzwingen, indem sie verlangen, dass die Validierung mit einer Nonce eingereicht wird. Manchmal wird die Nonce selbst als "Proof of Work" bezeichnet, was sich auf das Stück Daten bezieht, das schwer zu finden/erstellen und leicht zu verifizieren war, wie die Anagramme der Taxifahrer.

Miner messen, wie schnell sie auf das Mining von Blöcken hinarbeiten können, in "Hashes pro Sekunde", abgekürzt H/s. Jeder Miner kann seine Hash-Rate messen, die je nach der Ausrüstung, die er zum Mining verwendet, variiert. Die "Netzwerk-Hashrate" bezieht sich auf die Gesamt-Hashrate aller Miner, die an der Vorbereitung von Blöcken arbeiten.
4.4.1 Vorteile
4.4.1.1 Zensurresistenz

In PoW-Systemen wird durch den oben beschriebenen Nonce-Findungswettbewerb zufällig bestimmt, welche Version des Miners als neuester Block auf der längsten Kette akzeptiert wird. Wie in der Taxi-Analogie erwähnt, verhindert das PoW-Framework eine effektive Zensur. Einige böswillige Miner im Monero-Netzwerk könnten versuchen, bestimmte Transaktionen im Speicherpool bevorzugt zu behandeln oder auszuschließen, ein ehrlicher Monero-Miner wird diese Transaktionen jedoch einfach in den nächsten Block aufnehmen.
4.4.1.2 Verhinderung von Double-Spend-Angriffen

Es gibt eine weitere Blockchain-Herausforderung, die von PoW-Systemen gelöst wird, die nicht in der Taxi-Analogie enthalten war. Konkret könnte ein böswilliger Miner versuchen, eine Ausgabe doppelt auszugeben. Dies bezieht sich auf einen Angriff, bei dem der Miner alternative Blöcke erstellt, um seine vergangenen Transaktionen rückgängig zu machen und das Geld für sich selbst zurück zu stehlen. Der Angriff müsste auf diese Weise ablaufen:

    Der böswillige Miner Martin sendet eine Transaktion, in der er einen Teil seiner Moneroj an das Opfer "Valerie" sendet.
    Wenn die Transaktion "Martin >> Valerie" auf der Blockchain gemined wird, glaubt Valerie, dass sie bezahlt wurde.
    Martin nimmt, was immer er von Valerie gekauft hat...
    ... dann schürft Martin eine andere Version des Blocks, der ursprünglich die Transaktion "Martin >> Valerie" enthielt.
    In Martins alternativer Version existiert die Transaktion an Valerie nicht! Stattdessen enthält seine zweite Version eine Transaktion, die das Moneroj an eine seiner Wallets (Martin >> Martin) schickt, anstatt an Valerie.
    Wenn Martin schnell genug Blöcke minen kann, um seine Kette zur längsten zu machen, dann wird das Netzwerk seine alternative Realität akzeptieren. In der Praxis verhindert die Undurchführbarkeit dieses Schritts, dass es zu Doppelspenden-Angriffen kommt.
    Da das Schlüsselbild für Martins Ausgabe auf der Kette erscheint (nun verbunden mit der Transaktion an ihn selbst), wird das Netzwerk die Transaktion "Martin >> Valerie" nicht mehr als gültig akzeptieren, da das mit dieser Ausgabe verbundene Schlüsselbild bereits ausgegeben wurde.

An diesem Punkt ist Martin mit dem, was er von Valerie gekauft hat, verschwunden und hat auch die Moneroj zurückgestohlen, die er ursprünglich benutzt hat, um sie zu bezahlen.

Glücklicherweise verhindern PoW-Systeme, dass ein Angreifer diese Art von Double-Spend-Angriff durchführen kann, indem sie die Geschwindigkeit begrenzen, mit der er Blöcke generieren kann. Erinnern Sie sich daran, dass Miner immer der längsten Blockchain folgen werden, also müsste der böswillige Miner den Block mit der vorherigen Transaktion ändern und danach jeden Block neu minen, schnell genug, um die Länge der Hauptkette zu überholen. Da der böswillige Miner alleine arbeitet, um die geänderten Blöcke zu erzeugen, wird der Angreifer nicht in der Lage sein, gegen die Hashrate des gesamten restlichen Netzwerks, das den ursprünglichen Ledger aufrechterhält, aufzuholen. Diese Art von Angriff könnte nur dann erfolgreich sein, wenn der böswillige Miner über so viel Rechenleistung verfügt wie der gesamte Rest des Netzwerks zusammen. Aus diesem Grund wird der Begriff 51%-Angriff oft verwendet, um darauf hinzuweisen, dass eine Art von böswilliger Aktivität die Mehrheit der Hashrate erfordern würde.

![image](https://raw.githubusercontent.com/monerobook/monerobook/master/resources/img/mm-c04i03%2051%20attack.png)
Abbildung 4.8 - Der unehrliche Miner unten versucht einen Doppelspenden-Angriff, indem er eine andere Version eines bereits geminten Blocks erstellt. Alle ehrlichen Miner, die zusammenarbeiten, produzieren Blöcke schneller als der böswillige Miner, sodass die Kette des Angreifers mit der alternativen Transaktion verworfen wird.

Eine Kryptowährung mit mehr Minern und einer größeren Gesamt-Hashrate des Netzwerks wird auf diese Weise schwieriger anzugreifen sein, da der böswillige Miner mehr Rechenleistung haben muss als der Rest des globalen Netzwerks. Die Erhöhung der Gesamt-Hashrate durch die Einbeziehung von mehr Minern hilft, das Netzwerk gegen Angriffe abzusichern.
4.4.2 Die "Schwierigkeit" passt die Zeit zwischen den Blöcken an

Das Monero-Netzwerk zielt darauf ab, etwa alle zwei Minuten einen neuen Block auf die Kette zu setzen. Mit jedem geminten Block werden einige Transaktionen aus dem Pending Memory Pool auf die bestätigte Blockchain verschoben. Wenn die durchschnittliche Blockzeit zu lang wird, werden die Transaktionen zu langsam bestätigt. Wenn die durchschnittliche Blockzeit zu kurz ist, könnte das Netzwerk häufiger aus dem Takt geraten.

Das Netzwerk beeinflusst, wie schnell Blöcke gemined werden, indem es die Schwierigkeit des Nonce-Puzzles anpasst. Wenn im Laufe der Zeit mehr Miner dem Netzwerk beitreten, führt ihre kollektive Rate (Hashrate) dazu, dass Blöcke häufiger fertiggestellt werden (konzeptionell: wenn man die Anzahl der Leute, die etwas suchen, verdoppelt, wird die Gruppe es wahrscheinlich in der Hälfte der Zeit finden). Dies würde statistisch gesehen dazu führen, dass Miner Blöcke schneller finden als die angestrebte Blockzeit von 2 Minuten. Um dies zu kompensieren, wird die Schwierigkeit des Rätsels erhöht, was bedeutet, dass es länger dauert, einen Nonce zu finden, der den willkürlichen Anforderungen entspricht. Ebenso kann die Schwierigkeit so angepasst werden, dass sie leichter wird, wenn die Mining-Leistung abnimmt und dadurch die Blöcke zu selten fertiggestellt werden.

In der Taxi-Netzwerk-Analogie aus dem vorherigen Abschnitt könnte die Schwierigkeit der Buchstabenumordnungsaufgabe ähnlich willkürlich angepasst werden, indem mehr oder weniger Wörter in den Nonce-Sätzen verlangt werden. Wenn 20 % der Taxifahrer (Miner) an einem Tag nicht teilnehmen würden, dann würde es im Durchschnitt länger dauern, bis die (mit Nonces vervollständigten) Routenplanungsblöcke eingereicht werden, so dass einige Autos ohne Fahrer im Leerlauf stehen würden. Um dies zu korrigieren, würden die Taxifahrer zustimmen, die Nonce-Anforderungen von 50 Wörtern auf 40 Wörter zu senken. Dies würde die Fahrer wieder mit der Verfügbarkeit von Autos in Einklang bringen.

Die Schwierigkeit steigt proportional zur Gesamt-Hashrate des Netzwerks, um den Fluss der Blöcke konstant zu halten.
4.4.3 Der CryptoNight-Algorithmus

Monero verwendet eine Variante des CryptoNight PoW-Algorithmus, der sich deutlich von den Systemen unterscheidet, die von den meisten anderen Kryptowährungen verwendet werden. Eines der definierenden Merkmale von Monero ist die Verwendung einer PoW-Funktion, die für spezielle Mining-Ausrüstung schwer zu optimieren ist.

In den meisten Kontexten ist "Optimierung" eine gute Sache, daher werden Sie vielleicht überrascht sein, dass Moneros PoW-Algorithmus absichtlich eine Beschleunigung der Mining-Geschwindigkeiten hemmt. Das liegt daran, dass die Fähigkeit, übermächtige Mining-Ausrüstung zu schaffen, zu einer gefährlichen Zentralisierung der Miner führen kann. Diese Risiken werden in der Geschichte des Bitcoin-Minings perfekt illustriert.
4.4.3.1 Kontext: Die Geschichte des Bitcoin-Minings

Als Kryptowährungen mit dem Erscheinen von Bitcoin im Jahr 2009 die Szene betraten, fand das Mining ausschließlich auf Computer-CPUs statt. Da sich die Netzwerk-Mining-Schwierigkeit an die aktuelle Gesamt-Hashrate anpasst, war CPU-Mining in den frühen Tagen ausreichend profitabel. CPU-Miner haben eine Bitcoin-Hashing-Leistung in der Größenordnung von 1.000.000 H/s, der Einfachheit halber als 1 MH/s geschrieben.

Bald wurden Grafikkarten für das Mining von Kryptowährungen umfunktioniert. GPUs sind in der Lage, das Mining-Problem um Größenordnungen schneller anzugehen, etwa 100 MH/s. Da sich die Netzwerk-Schwierigkeit basierend auf den GPU-Minern anpasste, konnten die CPU-Miner nicht konkurrieren (d. h. die Mining-Belohnungen reichten nicht aus, um die Geräte- und Stromkosten zu bezahlen).

Als nächstes wurden anwendungsspezifische integrierte Schaltkreise (ASICs) gebaut, die ausschließlich für das Mining von Bitcoin gedacht waren. Diese speziellen Geräte sind recht teuer und schürfen viele tausend Mal schneller als GPUs - mehr als 1.000.000 MH/s. Mittlerweile hat sich die Schwierigkeit des Bitcoin-Netzwerks erhöht, um die ASICs unterzubringen, was dazu führt, dass die CPU- und GPU-Miner aus dem Geschäft gedrängt werden.

Bitcoin wurde ursprünglich mit der Vision gestartet, dass jeder auf der Welt, der einen Computer hat, mit dem Mining beginnen kann, um das Netzwerk zu sichern und einige Bitcoins als Belohnung zu erhalten. Leider hat die Schaffung und Verbreitung von ASICs diesen Traum sehr effektiv beendet. Wenn Sie jetzt mit dem Mining von Bitcoin beginnen wollen, müssen Sie sich einen ASIC für hunderte oder tausende von Euros besorgen.

Diese ASIC-Übernahme hat die große Mehrheit der Bitcoin-Miner aus dem Geschäft gebracht. Das Netzwerk begann seine Existenz gesichert durch Scharen von Computerfreaks, die über den ganzen Globus verstreut waren und alle mit ihren PCs und Grafikkarten daran teilnahmen. Traurigerweise ist diese wahre Dezentralisierung von Bitcoin eine vergangene Ära. Jetzt wird das Netzwerk von mehreren großen Unternehmen mit massiven ASIC-Farmen dominiert, die effektiv das Bitcoin-Rückgrat geworden sind.

4.4.3.2 ASICs ermöglichen eine gefährliche Zentralisierung

Da viele der wichtigsten Kryptowährungen von ASIC-Minern dominiert werden, lohnt es sich, sich mit dem Thema und seinen Risiken zu beschäftigen. Zentralisierung tritt in zwei Formen auf: ASICs werden nur von wenigen Unternehmen hergestellt (Zentralisierung der Herstellung) und das anschließende Mining beschränkt sich tendenziell auf wenige große Farmen (Zentralisierung des Minings).

Die Zentralisierung der ASIC-Herstellung und des Minings auf wenige große Unternehmen ermöglicht es Hackern, Angreifern und Regierungen, einen unverhältnismäßig großen Einfluss auf das Netzwerk und seinen Betrieb auszuüben. Dies beginnt viele der Vorteile der Dezentralisierung zunichte zu machen. Ein Beispiel:

Der universelle Zugang zum Mining florierte in den Tagen des CPU- und GPU-Minings, das meist unregulierte Allzweck-Hardware verwendet. Allerdings erfordert das Mining jetzt spezialisierte Hardware, die einem viel größeren Risiko der Regulierung und Kontrolle ausgesetzt ist. Es ist möglich, dass einige Regierungen Verbote verhängen oder Lizenzen für die Herstellung/den Besitz von ASICs verlangen.

Der Widerstand gegen Zensur wird geschwächt, wenn der Großteil der Hash-Power von Monero von großen Mining-Farmen kontrolliert wird, die unter Druck gesetzt werden können, bestimmte Transaktionen zu bestätigen oder zu zensieren. Es wäre schwierig, diesen Einfluss auf eine globale Ansammlung von Amateur-Minern auszuüben, und viel einfacher, diese Art von Aktivität zentralisierten Mining-Firmen aufzuerlegen.

Die Ausfallsicherheit des Netzwerks kann katastrophal untergraben werden, wenn ein böswilliger Hersteller (oder einer, der Regierungsanweisungen folgt) einen geheimen ASIC-Killswitch einbaut, um seine Mining-Ausrüstung fernzusteuern oder abzuschalten. Dies schafft einen Single Point of Failure, dessen Aktivierung sofort den größten Teil der Netzwerk-Hashrate töten würde. Dies würde das Netzwerk in einen plötzlichen verwundbaren Zustand mit dramatisch verringerter Hashrate stürzen, um die Währung zu sichern. Dieses Risiko ist viel höher, wenn eine kleine Anzahl von ASIC-Herstellern den Großteil der Produktion kontrolliert.

Die ASIC-Übernahme von Bitcoin ist abgeschlossen. Während es noch einige kleine Miner mit ASICS gibt, die in Pools arbeiten, dominieren große Mining-Farmen die Netzwerk-Hashrate. Besorgniserregend ist, dass die Mehrheit der Bitcoin-ASICs von einem einzigen Hersteller entwickelt, hergestellt und ausgeliefert werden - im krassen Gegensatz zu den frühen Tagen des Bitcoins, als Miner jede Marke, jedes Modell und jede Geschmacksrichtung von CPU und GPU zum Mining verwendeten. Die Verbreitung von ASICs wäre viel weniger riskant, wenn es einen vielfältigen und konkurrenzfähigen ASIC-Markt gäbe.

4.4.3.3 Monero wehrt sich aktiv gegen ASICs

Aufgrund der zugrundeliegenden egalitären Prinzipien lehnt die Monero-Gemeinschaft ASICs und deren unvermeidliche Zentralisierung der Mining-Leistung ab. Während der "CPU-harte" Hash-Algorithmus (SHA-256), der von Bitcoin verwendet wird, für eine ASIC-Optimierung zugänglich ist, schreckt Monero die ASIC-Entwicklung ab, indem es einen "speicherharten" Algorithmus (CryptoNight) verwendet, der schwer zu beschleunigen ist. Folglich sind sowohl CPU- als auch GPU-Mining für Monero machbar, sogar im Jahr 2018. Es gibt derzeit Milliarden von existierenden Geräten (jede moderne x86-CPU und viele GPUs), die in der Lage sind, Monero zu minen, so dass der Prozess für jede Person mit Internetanschluss zugänglich ist. Tatsächlich ist es sogar möglich, Monero in einem Webbrowser von jedem Telefon oder Computer aus zu minen!

Anfang März 2018 war die Monero-Community schockiert, als sie feststellte, dass CryptoNight-ASICs heimlich produziert wurden und Monero minen! Diese Geräte behaupteten, Monero 25-mal schneller zu minen als die führenden GPUs, und eine rückblickende Hashrate-Analyse legt nahe, dass sie Ende 2017 und Anfang 2018 fast die Hälfte der Monero-Netzwerk-Hashrate ausmachten.

Da der CryptoNight-Algorithmus als speicherharte Funktion speziell entwickelt wurde, um "die Lücke zwischen CPU (Mehrheit) und GPU/FPGA/ASIC (Minderheit) Minern zu schließen", war die Existenz dieser ASICs eine unerwartete Entdeckung. Während die CryptoNote-Autoren anmerken, dass "es angemessen ist, dass einige Nutzer einen gewissen Vorteil gegenüber anderen haben können", schlagen sie vor, dass "ihre Investitionen mindestens linear mit der Leistung wachsen sollten." Natürlich wird ein neuerer Computer oder eine schönere Grafikkarte effizienter minen als ältere Geräte, aber ASICs schaffen eine extrem unverhältnismäßige Verteilung der Hashrate.

Die Monero-Community hat schnell reagiert und proaktiv Schritte unternommen, um das ASIC-Mining einzudämmen, noch bevor die Existenz der Geräte vollständig bestätigt war. Das Monero-Routine-Upgrade im Frühjahr 2018 beinhaltete eine kleine Änderung des CryptoNight-Algorithmus, die ASICs anders beeinflussen sollte als GPU/CPU-Miner. Diese kleine Änderung änderte nicht die Schwierigkeit oder das Verhalten des Algorithmus, so dass die CPU/GPU-Miner in der Lage waren, sich leicht an die neue Variante anzupassen, wenn sie mit dem Netzwerk aktualisiert wurden.

ASICs hingegen sind grundsätzlich nicht in der Lage, sich an neue (kleinere oder größere) Varianten anzupassen. Man kann sich ASICs als Arbeiter vorstellen, die darauf trainiert sind, eine Aufgabe extrem schnell zu erledigen, aber nicht lernen können, etwas anderes zu tun. Der auszuführende Algorithmus ist physisch in die ASIC-Schaltkreise geätzt, so dass sie nicht umprogrammiert oder umfunktioniert werden können.

Als die kleine CryptoNote-Änderung bei Block 1546000 implementiert wurde, wurden die ASICs sofort inkompatibel mit dem Netzwerk, und etwa die Hälfte der gesamten Hashrate verschwand. Da die ASICs nicht in der Lage waren, sich auf die Verarbeitung von Blöcken durch einen geänderten Algorithmus einzustellen, werden nun alle Blöcke, die sie produzieren, sofort vom Monero-Netzwerk als ungültig zurückgewiesen.

Vorerst scheint es, dass das Monero-Netzwerk die unerwartete ASIC-Bedrohung erfolgreich entschärft hat. Um ASICs weiterhin zu entmutigen, ändert Monero nun den Mining-Algorithmus bei jedem Netzwerk-Update leicht. Sie erforschen auch völlig neue Algorithmen, um das Netzwerk langfristig vor ASICs zu schützen. Da Monero alle 6 Monate routinemäßige Hard Forks durchführt, sollte dies Versuche, Monero-ASICs zu produzieren, abschrecken, da jedes teure und langwierige Redesign sofort wieder veraltet wäre.
4.4.4 Kurzer Hinweis auf PoW-Alternativen

Es gibt alternative Systeme zur Aufrechterhaltung der Fairness neben Proof of Work; Beispiele sind Proof of Stake, Proof of Space, Proof of Bandwidth und sogar Mischformen zwischen mehreren Typen. Jedes System hat seine eigenen Stärken und Nachteile. PoW ist derzeit der am weitesten verbreitete und praxiserprobte Konsensmechanismus und ist derzeit das einzige System, das von Monero verwendet wird.

4.5 Kryptografische Konzepte für Arbeitsnachweise

In diesem Kapitel haben wir uns auf die Funktionsweise von Hashes und Nonces konzentriert und sie hauptsächlich durch Analogien beschrieben. Wenn Sie wissen wollen, wie sie wirklich funktionieren, werden im Rest des Kapitels die eigentlichen kryptografischen Prinzipien vorgestellt.
4.5.1 Hashes (allgemeines Konzept)

Hash-Funktionen sind ein kryptografisches Werkzeug, das beliebige Eingabedaten verdauen und einen eindeutigen Fingerabdruck ausgeben kann. Diese Algorithmen sind so konzipiert, dass jede noch so kleine Änderung an der Eingabe zu einer völlig anderen Ausgabe führt. Der Begriff "Hash" kann sowohl für die Funktion selbst als auch für ihre Ausgabe für eine bestimmte Eingabe verwendet werden.

Das Hinzufügen, Entfernen oder Ändern auch nur eines einzigen Zeichens führt zu einem völlig anderen Hashwert. Betrachten wir die Nachricht "Bitte senden Sie 50 Euro an Jen." Wir können die Zeichenfolge durch einen dieser Algorithmen laufen lassen, um ihren Hash zu erzeugen a2d2a9059ed8d323 Die folgende Tabelle zeigt, wie sich die Hash-Ausgabe bei jeder Änderung der Eingabe dramatisch verändert:
Eingabe Ausgabe Kommentar
Bitte senden Sie 50 EUR an Jen. a2d2a9059ed8d323 Wahre Nachricht
Bitte senden Sie 500 EUR an Jen. 	05cbdd8dd96718ac Hat eine zusätzliche '0' zum Betrag hinzugefügt
Bitte senden Sie 60 EUR an Jen. f5087a90b63b1777 Hat '5' in '6' geändert
Bitte senden Sie 50 EUR an Jon. ffd424b7077a3c58 Änderte Empfänger zu 'Jon'.
Bitte senden Sie 50 EUR an Jen. a2d2a9059ed8d323 Gleiche Eingabe = gleiche Ausgabe!

 Die Beispielausgabe hier sind die ersten 16 Zeichen des SHA-256-Hashes jeder Eingabe
$ echo {Eingabe} | sha256sum | cut -c1-16

Hash-Funktionen werden in vielen Sicherheitsmerkmalen von Kryptowährungen stark genutzt. Kryptografische Hash-Funktionen sind so konstruiert, dass sie kollisionsresistent sind, was bedeutet, dass es schwer ist, zwei Eingaben zu finden, die kollidieren, um den gleichen Ausgabedigest zu erzeugen. Dies ist von zentraler Bedeutung für die Unveränderlichkeit (Manipulationssicherheit) der Blockchain, da jeder Versuch, Daten in einem vergangenen Block zu ändern, zu einer völlig anderen Hash-Ausgabe für diesen und alle nachfolgenden Blöcke führt.

Diese Vorstellung einer sich erweiternden, nur aus Anhängen bestehenden Datenbank, bei der jede Gruppe von Einträgen kryptografisch durch Hashes zum vorherigen Block gesichert ist, ist ein Schlüsselkonzept hinter der Blockchain-Revolution.

4.5.2 Nonces (allgemeines Konzept)

Der Begriff Nonce bezieht sich auf ein Rätsel, das nicht inhärent physikalisch/mathematisch sinnvoll ist. Betrachten Sie zum Beispiel die folgenden "Fill-in-the-Blank"-Fragen, die ein Lehrer seinen Schülern geben könnte:

Rätsel A) Das Esperanto-Wort für "c___" inspirierte den Namen "Monero" Akzeptable Antwort: "Münze" Rätsel B) 1 Kilogramm ist gleich "____" Gramm. Akzeptable Antwort: 1000 Rätsel C) Diese 3-stellige Primzahl "3___" wiederholt keine Ziffern Akzeptable Antwort: irgendeine von {307, 317, 347, 349, 359, etc...} Rätsel D) Diese 5-stellige Primzahl "7___" wiederholt keine Ziffern Akzeptable Nonces: eine beliebige von {71263, 72169, 73609, 74869, usw...}

Rätsel A und B sind beide sinnvoll und haben jeweils eine richtige Antwort (A: "Münze" B: "1000"), die sich der Schüler für zukünftige Probleme merken will. Daher werden diese Antworten nicht als "Nonces" betrachtet.

Die Rätsel C und D sind jedoch beides "Fleißaufgaben", die schwer zu lösen sind und keine Erkenntnisse zu einem echten Problem beitragen. Es gibt mehrere Lösungen, die alle die Nonce-Anforderung erfüllen; für Frage C ist die Antwort "359" genauso gültig wie "307".

Ein Schüler, der eine Stunde damit verbringt, verschiedene Zahlen zu testen, um auf die Antwort "359" für Rätsel C zu kommen, muss die Suche nach einer gültigen Nonce bei jeder Variation des Rätsels von vorne beginnen, z. B. "Diese dreistellige Primzahl "6___" wiederholt keine Ziffern."

Wenn Sie nur einen Bleistift und Papier hätten (oder sogar einen Taschenrechner), würden Sie eher Rätsel C oder Rätsel D lösen? Wahrscheinlich Rätsel C, da Sie wahrscheinlich schneller eine gültige dreistellige Antwort finden als eine gültige fünfstellige Antwort. Sie können sehen, wie die Schwierigkeit des Problems beliebig angepasst werden kann, indem Sie die Anzahl der benötigten Ziffern ändern.
4.6 Zusammenfassung des PoW-Konzepts

Kryptowährungen verwenden den Hash eines jeden Blocks, um sicherzustellen, dass sein Inhalt nicht verändert wurde, da die Veränderung eines einzigen Zeichens aufgrund des radikal anderen Hashs (der sich durch nachfolgende Blöcke fortpflanzt) sofort offensichtlich wäre. Der Hash eines Blocks enthält alle seine Inhalte: Transaktionen, Header, den Hash des vorherigen Blocks und ein Nonce-Feld.

Um an der Vervollständigung eines Blocks zu arbeiten, müssen die Miner nach dem Zufallsprinzip Werte für das Nonce-Feld erraten und versuchen, einen zu finden, der dazu führt, dass der Hash des gesamten Blocks eine Ausgabe unter einem bestimmten Schwellenwert erzeugt, der durch die aktuelle Netzwerkschwierigkeit bestimmt wird. Da es unmöglich ist, vorherzusagen, wie sich eine Änderung der Eingaben in eine Hash-Funktion auf ihre Ausgaben auswirkt, müssen die Miner durch Versuch und Irrtum zufällige Nonces finden, bis sie eine finden, die einen Ausgabe-Hash erzeugt, der die aktuelle Netzwerk-Schwierigkeit erfüllt.

Das Netzwerk erhöht oder senkt diesen Schwellenwert, um die Mining-Schwierigkeit zu beeinflussen, um eine 2-Minuten-Blockzeit unabhängig von Änderungen in der Gesamt-Hashrate beizubehalten.


